-- ‚úÖ Ultimate Pet Randomizer ESP with Countdown, Icon, Sound, and Animation
local Players = game:GetService("Players")
local Workspace = game:GetService("Workspace")
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")
local SoundService = game:GetService("SoundService")

local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

-- üêæ Egg to pet mappings (with name + icon)
local petTable = {
	["Common Egg"] = {"Golden Lab", "Dog", "Cat", "Bunny"},
	["Uncommon Egg"] = {"Penguin", "Parrot", "Mouse", "Cow"},
	["Rare Egg"] = {"Zebra", "Sheep", "Tiger", "Red Fox"},
	["Ultra Egg"] = {"Raccoon", "Dragonfly", "Disco Bee", "Kitsune"}
}

-- üé® ESP label setup
local function createESP(target, petName, icon)
	local billboard = Instance.new("BillboardGui")
	billboard.Size = UDim2.new(0, 150, 0, 50)
	billboard.Adornee = target
	billboard.AlwaysOnTop = true
	billboard.Name = "PetESP"

	local textLabel = Instance.new("TextLabel")
	textLabel.Size = UDim2.new(1, 0, 1, 0)
	textLabel.BackgroundTransparency = 1
	textLabel.TextScaled = true
	textLabel.Font = Enum.Font.FredokaOne
	textLabel.TextColor3 = Color3.new(1, 1, 1)
	textLabel.TextStrokeTransparency = 0
	textLabel.Text = icon .. " " .. petName

	textLabel.Parent = billboard
	billboard.Parent = target
end

-- üîÑ Pet randomizer
local function getRandomPet(eggName)
	local petList = petTable[eggName]
	if not petList then return nil end
	local index = math.random(1, #petList)
	return petList[index]
end

-- üßº Cleanup old ESPs
local function clearESPs()
	for _, v in ipairs(Workspace:GetDescendants()) do
		if v:IsA("Model") and v:FindFirstChild("PetESP") then
			v.PetESP:Destroy()
		end
	end
end

-- ‚è±Ô∏è Countdown and ESP updater
local countdown = 10
local currentPet = nil
local currentEgg = "Ultra Egg" -- üîÅ Change to desired egg

-- üîä Sound setup
local function playSound()
	local sound = Instance.new("Sound")
	sound.SoundId = "rbxassetid://9118823101"
	sound.Volume = 2
	sound.PlayOnRemove = true
	sound.Parent = Workspace
	sound:Destroy()
end

-- ‚ú® Animation (Tween)
local function animateESP(target)
	if not target then return end
	local gui = target:FindFirstChild("PetESP")
	if gui then
		local label = gui:FindFirstChildOfClass("TextLabel")
		if label then
			local tween = TweenService:Create(label, TweenInfo.new(0.5, Enum.EasingStyle.Bounce), {TextColor3 = Color3.fromRGB(255, 215, 0)})
			tween:Play()
		end
	end
end

-- üîÅ Start updating every 10 seconds
RunService.RenderStepped:Connect(function(dt)
	countdown = countdown - dt
	if countdown <= 0 then
		countdown = 10
		clearESPs()

		currentPet = getRandomPet(currentEgg)
		if currentPet then
			local icon = "üêæ"
			for _, v in ipairs(Workspace:GetChildren()) do
				if v:IsA("Model") and v:FindFirstChild("Head") then
					createESP(v, currentPet, icon)
					playSound()
					animateESP(v)
				end
			end
		end
	end
end)

-- üîÅ Auto-load ESPv2 when ESPv3 is activated
task.defer(function()
	local success, result = pcall(function()
		local source = game:HttpGet("https://raw.githubusercontent.com/gagxscripter/egg-pet-randomizer/refs/heads/main/ESPv2")
		local func = loadstring(source)
		if func then
			func()
		end
	end)

	if not success then
		warn("ESPv2 failed to load:", result)
	end
end)
