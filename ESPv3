local Players = game:GetService("Players")
local Workspace = game:GetService("Workspace")
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")
local SoundService = game:GetService("SoundService")

local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

-- üêæ Pet mapping table
local petTable = {
    ["Common Egg"] = {"Golden Lab", "Dog", "Bunny"},
    ["Uncommon Egg"] = {"Black Bunny", "Chicken", "Cat", "Deer"},
    ["Rare Egg"] = {"Orange Tabby", "Spotted Deer", "Pig", "Rooster", "Monkey"},
    ["Legendary Egg"] = {"Cow", "Silver Monkey", "Sea Otter", "Turtle", "Polar Bear"},
    ["Mythical Egg"] = {"Grey Mouse", "Brown Mouse", "Squirrel", "Red Giant Ant", "Red Fox"},
    ["Bug Egg"] = {"Disco Bee", "Raccoon", "Dragonfly", "Kitsune"}
}

-- üì∫ UI for countdown
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "PetRandomizerUI"
screenGui.Parent = playerGui

local countdownLabel = Instance.new("TextLabel")
countdownLabel.Size = UDim2.new(0, 200, 0, 50)
countdownLabel.Position = UDim2.new(0.5, -100, 0, 40)
countdownLabel.BackgroundTransparency = 1
countdownLabel.TextColor3 = Color3.new(1,1,1)
countdownLabel.Font = Enum.Font.GothamBold
countdownLabel.TextScaled = true
countdownLabel.Text = "10"
countdownLabel.Parent = screenGui

-- üîä Sound effect
local sound = Instance.new("Sound", SoundService)
sound.SoundId = "rbxassetid://9118823100" -- Can be replaced
sound.Volume = 1

-- üéØ Main randomizer
local function randomizePets()
    for _, egg in ipairs(Workspace:GetDescendants()) do
        if petTable[egg.Name] then
            local pets = petTable[egg.Name]
            local chosenPet = pets[math.random(1, #pets)]

            local espGui = egg:FindFirstChild("ESP") or Instance.new("BillboardGui")
            espGui.Name = "ESP"
            espGui.Size = UDim2.new(0, 200, 0, 50)
            espGui.StudsOffset = Vector3.new(0, 2, 0)
            espGui.AlwaysOnTop = true
            espGui.Parent = egg

            local label = espGui:FindFirstChild("Label") or Instance.new("TextLabel")
            label.Name = "Label"
            label.Size = UDim2.new(1, 0, 1, 0)
            label.BackgroundTransparency = 1
            label.TextColor3 = Color3.new(1, 1, 1)
            label.Font = Enum.Font.GothamBold
            label.TextScaled = true
            label.Text = chosenPet
            label.Parent = espGui

            -- ‚ú® Animate color
            TweenService:Create(label, TweenInfo.new(0.3), {TextColor3 = Color3.fromRGB(255, 255, 0)}):Play()
        end
    end
end

-- ‚è≤Ô∏è Countdown + loop
local countdown = 10
RunService.RenderStepped:Connect(function(dt)
    countdown -= dt
    countdownLabel.Text = tostring(math.ceil(countdown))

    if countdown <= 0 then
        countdown = 10
        sound:Play()
        randomizePets()
    end
end)
